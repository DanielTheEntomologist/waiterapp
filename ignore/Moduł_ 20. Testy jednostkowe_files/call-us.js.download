(()=>{var e={showOnStart:!1,dates:[],todayCalls:void 0,container:function(){return $("#call-us")},button:function(){return $("#call-us-icon")},callTriger:function(){return $('[data-target="#call-us-modal"]')},callDesc:function(){return $("#call-us-desc")},callSecNumber:function(){return $(".call-section .number-circle")},callSecPlural:function(){return $(".call-section .count-plural")},modal:function(){return $("#call-us-modal")},section:function(){return $("#call-section-form")},phoneField:function(){return $("#call-us-input-phone")},phoneFieldSec:function(){return $("#call-us-section-phone")},dateField:function(){return $("#call-us-input-date")},dateFieldSec:function(){return $("#call-us-section-day")},timeField:function(){return $("#call-us-input-time")},timeFieldSec:function(){return $("#call-us-section-hour")},counter:function(){return $("#call-us-counter")},counterHolder:function(){return $("#call-us-counter-holder")},counterText:function(){return $("#call-us-counter-text")},counterTextFill:function(t){var n="more";1===t?n="one":t>=2&&t<5&&(n="few"),e.counterText().text(e.counterText().data(n)),e.callSecPlural().text(e.counterText().data(n))},getCallCount:function(){void 0!==e.counter().data("url")&&$.ajax({url:e.counter().data("url"),method:"get"}).done((function(t){e.todayCalls=t.counter,e.handleCallCount(t.counter)}))},handleCallCount:function(t){$(".call-section .section-description.hidden").show(),$(".call-section .section-description.empty").hide(),e.counter().text(t),e.callSecNumber().text(t),e.counterTextFill(t),e.counterHolder().fadeIn()},updateCallSectionCount:function(){$number=e.callSecNumber(),void 0!==$number&&(void 0===e.todayCalls?e.getCallCount():e.handleCallCount(e.todayCalls))},liveValidatePhoneNumber:function(e){var t=e.value.replace(/[^0-9\.]/g,"");e.value!=t&&(e.value=t)},validatePhoneNumber:function(t){var n=/^[+-]?\d+$/.test(t);return 9==t.length&&n?(e.handleValidationErrorMessage("phone",!1),!0):(e.handleValidationErrorMessage("phone",!0),!1)},handleValidationErrorMessage:function(e,t){var n="#validation-message-"+e;t?$(n).removeClass("display-none"):$(n).addClass("display-none")},validateStep1:function(){return e.validatePhoneNumber(e.phoneField().val())},updateCallDates:function(t,n){var a=$(t).val(),l=void 0===e.dates[a]?[]:e.dates[a].times,o=n?e.timeFieldSec():e.timeField();o.find("option").remove(),l.forEach((function(e){o.append('<option value="'+e+'">'+e+"</option>")}))},addBodyClass:function(){$("body").addClass("callus-enabled")},addBodyClassMessenger:function(){(document.getElementsByClassName("fb-customerchat")[0]||document.getElementById("fb-customerchat"))&&e.addBodyClass()},open:function(){e.showOnStart=!0},callUsButtons:function(){var e=$(".call-us-nav-button"),t=$(".contact-us-button-container .call-us-nav-button");$("#skontaktuj-sie-z-nami").length&&($(window).width()>767?(e.show(),t.hide()):(e.hide(),t.show()))},init:function(){if(e.modal()){if(e.modal().on("shown.bs.modal",(function(){e.getCallCount()})),e.callTriger().on("click",(function(){FB.CustomerChat?FB.CustomerChat.hideDialog():window.fcWidget&&window.fcWidget.close()})),e.phoneField().on("keyup",(function(){e.liveValidatePhoneNumber(this)})),e.dateField().on("change",(function(){e.updateCallDates(this,!1)})),$("#call-us-submit-phone").on("click",(function(t){t.preventDefault(),e.validateStep1()&&$.ajax({url:$("#call-us-form1").attr("action"),method:"get"}).done((function(t){e.dates=t,Object.keys(e.dates).forEach((function(t){e.dateField().append('<option value="'+t+'">'+e.dates[t].label+"</option>")})),e.dateField().change(),$("#call-us-step1").hide(),$("#call-us-step2").fadeIn()}))})),$("#call-us-submit-call").on("click",(function(t){t.preventDefault(),$.ajax({url:$("#call-us-form2").attr("action"),method:"post",data:{phone:e.phoneField().val(),date:e.dateField().val(),time:e.timeField().val()}}).done((function(t){e.todayCalls++,$("#call-us-step2").hide(),$("#call-us-step3").fadeIn()}))})),window.fcWidget){var t=this;window.fcWidget.on("widget:loaded",(function(){t.addBodyClass()}))}else window.useMessenger||this.addBodyClass();e.showOnStart&&e.modal().modal("show")}e.section()&&(e.phoneFieldSec().on("keyup",(function(){e.liveValidatePhoneNumber(this)})),e.phoneFieldSec()&&$.ajax({url:"/"+App.getLang()+"/call-center/dates/phone_calls",method:"get"}).done((function(t){e.dates=t,Object.keys(e.dates).forEach((function(t){e.dateFieldSec().append('<option value="'+t+'">'+e.dates[t].label+"</option>")})),e.dateFieldSec().change()})),e.dateFieldSec().on("change",(function(){e.updateCallDates(this,!0)})),$("#call-us-section-submit-call").on("click",(function(t){t.preventDefault(),$.ajax({url:"/"+App.getLang()+"/call-center/step2/phone_calls",method:"post",data:{phone:e.phoneFieldSec().val(),date:e.dateFieldSec().val(),time:e.timeFieldSec().val()}}).done((function(t){e.todayCalls++,$("#call-section-form").hide(),$("#call-section-success").show(0,(function(){var e=$("#call-section-success").offset().top,t=$(window).height(),n=$(window).scrollTop();(n+t<e+50||n>e+50)&&$("html, body").animate({scrollTop:$("#page-call-section").offset().top},800)}))}))}))),this.callUsButtons(),$(window).resize(this.callUsButtons)}};$(document).ready((function(){setTimeout((function(){e.init()}),3e3)}))})();